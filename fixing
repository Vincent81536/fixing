-- Modern R6 Reanimate (Roblox - August 2025 Compatible)
-- ✅ Local-only reanimate | ✅ Animation support (e.g., Hakari) | ✅ Animator API | ❌ No Player.Character overwrite

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Player = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Wait for character
local Character = Player.Character or Player.CharacterAdded:Wait()
Character:WaitForChild("Humanoid")
Character:WaitForChild("HumanoidRootPart")

-- Clone the character to create the reanimated version
local FakeChar = Character:Clone()
FakeChar.Name = "FakeRig"
FakeChar.Parent = workspace
FakeChar:SetPrimaryPartCFrame(Character.PrimaryPart.CFrame)

-- Clean up scripts from the fake rig
for _, obj in ipairs(FakeChar:GetDescendants()) do
    if obj:IsA("Script") or obj:IsA("LocalScript") then
        obj:Destroy()
    end
end

-- Ensure Animator exists
local humanoid = FakeChar:FindFirstChildOfClass("Humanoid")
if not humanoid:FindFirstChildOfClass("Animator") then
    local animator = Instance.new("Animator")
    animator.Parent = humanoid
end

-- Setup camera to follow fake rig
Camera.CameraSubject = humanoid
Camera.CameraType = Enum.CameraType.Custom

-- Anchor real character so it doesn’t interfere
Character:FindFirstChild("HumanoidRootPart").Anchored = true
Character.HumanoidRootPart.CFrame = CFrame.new(0, -10000, 0) -- move it out of sight

-- Optional: Hide original character
for _, part in ipairs(Character:GetDescendants()) do
    if part:IsA("BasePart") then
        part.Transparency = 1
        part.CanCollide = false
    end
end

-- Play a custom animation (e.g., Hakari)
local function playCustomAnim(animId)
    local animator = humanoid:FindFirstChildOfClass("Animator")
    if animator then
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://" .. tostring(animId)
        local track = animator:LoadAnimation(anim)
        track:Play()
        track.Looped = true
    end
end

-- Example: Play Hakari
playCustomAnim(92699725136780) -- Replace with real Hakari animation ID

-- Keep fake rig upright and stable
RunService.RenderStepped:Connect(function()
    if FakeChar and FakeChar.PrimaryPart then
        FakeChar:SetPrimaryPartCFrame(FakeChar.PrimaryPart.CFrame * CFrame.new(0, 0, 0))
    end
end)

print("✅ Reanimate ready. Fake rig active with animation support.")
